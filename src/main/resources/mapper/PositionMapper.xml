<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.lnu.recruitment.modules.position.mapper.PositionMapper">

    <resultMap id="BaseResultMap" type="edu.lnu.recruitment.modules.position.entity.Position" >
        <id column="id" jdbcType="BIGINT" property="id"/>
        <result column="recruiter_id" jdbcType="BIGINT" property="recruiterId"/>
        <result column="company_id" jdbcType="BIGINT" property="companyId"/>
        <result column="description" jdbcType="VARCHAR" property="description"/>
        <result column="highlight" jdbcType="VARCHAR" property="highlight"/>
        <result column="category" jdbcType="VARCHAR" property="category"/>
        <result column="threshold" jdbcType="VARCHAR" property="threshold"/>
        <result column="keyword" jdbcType="VARCHAR" property="keyword"/>
        <result column="address" jdbcType="VARCHAR" property="address"/>
        <result column="salary_range" jdbcType="VARCHAR" property="salaryRange"/>
        <result column="create_time" jdbcType="TIMESTAMP" property="createTime"/>
        <result column="update_time" jdbcType="TIMESTAMP" property="updateTime"/>
    </resultMap>

    <sql id="Base_Column_List">
        id,
        position_name,
        position_description,
        highlight,category,threshold,keyword,address,
        salary_range
    </sql>
    <select id="selectLikeName" resultType="edu.lnu.recruitment.modules.position.entity.Position">
        select<include refid="Base_Column_List"/>
        from t_position
        where position_name like #{name}
    </select>

    <select id="selectLikeCategory" resultType="edu.lnu.recruitment.modules.position.entity.Position">
        select<include refid="Base_Column_List"/>
        from t_position
        where category like #{category}
    </select>

    <select id="selectLikeThreshold" resultType="edu.lnu.recruitment.modules.position.entity.Position">
        select<include refid="Base_Column_List"/>
        from t_position
        where threshold like #{threshold}
    </select>
    <select id="selectAllByName" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        position_name = #{name,jdbcType=VARCHAR}
    </select>
    <select id="selectAllByCategory" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        category = #{category,jdbcType=VARCHAR}
    </select>
    <select id="selectAllByThreshold" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        threshold = #{threshold,jdbcType=VARCHAR}
    </select>
    <select id="selectAllByKeyword" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        keyword = #{keyword,jdbcType=VARCHAR}
    </select>
    <select id="selectAllByAddress" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        address = #{address,jdbcType=VARCHAR}
    </select>
    <select id="selectAllBySalaryRange" resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        salary_range = #{salaryRange,jdbcType=VARCHAR}
    </select>
    <select id="selectLikeSalaryRange" resultType="edu.lnu.recruitment.modules.position.entity.Position">
        select
        <include refid="Base_Column_List"/>
        from t_position
        where
        salary_range like #{salaryRange}
    </select>
    <select id="selectAllByRecruiterId" resultMap="BaseResultMap">
        select
        t_position.*
        from t_position left join t_recruiter
        on
        t_position.recruiter_id=t_recruiter.id
        where
        recruiter_id=#{recruiterId}
    </select>
    <select id="selectAllByCompanyId" resultMap="BaseResultMap">
        select
        t_position.*
        from t_position left join t_company
        on
        t_position.company_id=t_company.id
        where
        company_id=#{companyId}
    </select>


</mapper>